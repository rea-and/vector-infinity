{
  "openapi": "3.1.0",
  "info": {
    "title": "WHOOP Health Data API",
    "description": "Access WHOOP health, strain, recovery, and sleep data for context in ChatGPT conversations",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://vectorinfinity.com/",
      "description": "Your Vector Infinity server URL"
    }
  ],
  "paths": {
    "/api/plugins/whoop/semantic-search": {
      "post": {
        "operationId": "semanticSearchWhoop",
        "summary": "Semantic search in WHOOP health data using vector embeddings",
        "description": "Search your WHOOP health data (recovery, strain, sleep, workouts) using semantic similarity. This uses vector embeddings to find health data that is semantically similar to your query, not just keyword matches.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "query": {
                    "type": "string",
                    "description": "The search query. This will be converted to an embedding and compared against all WHOOP data embeddings to find semantically similar health data."
                  },
                  "top_k": {
                    "type": "integer",
                    "description": "Number of results to return (default: 5, recommended: 5-20)",
                    "default": 5,
                    "minimum": 1,
                    "maximum": 50
                  }
                },
                "required": ["query"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results with similarity scores",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "results": {
                      "type": "array",
                      "description": "Array of search results, sorted by similarity score (highest first)",
                      "items": {
                        "type": "object",
                        "properties": {
                          "text": {
                            "type": "string",
                            "description": "The full text of the health data (type, date, metrics)"
                          },
                          "score": {
                            "type": "number",
                            "description": "Similarity score (0-1, higher is more similar)",
                            "minimum": 0,
                            "maximum": 1
                          },
                          "metadata": {
                            "type": "object",
                            "description": "Additional metadata about the health data",
                            "properties": {
                              "id": { "type": "integer" },
                              "title": { "type": "string" },
                              "source_id": { "type": "string" },
                              "item_type": { "type": "string" },
                              "source_timestamp": { "type": "string", "format": "date-time" }
                            }
                          }
                        }
                      }
                    },
                    "query": {
                      "type": "string",
                      "description": "The original search query"
                    },
                    "total_found": {
                      "type": "integer",
                      "description": "Total number of items that matched (before limiting to top_k)"
                    },
                    "returned": {
                      "type": "integer",
                      "description": "Number of results returned"
                    }
                  },
                  "required": ["results", "query", "total_found", "returned"]
                }
              }
            }
          }
        }
      }
    }
  }
}

